---
layout: single
title:  "사용권한과 환경변수"
tag: [Linux]
toc: true
---

# 사용권한

### 폴더와 파일 확인 및 구별

> 폴더 생성시 mkdir '폴더이름', 파일 생성시 nano '파일이름' 으로 명령어를 입력해야 한다.

- 폴더와 파일을 생성한 후, 명령어 ```ls -l``` 을 프롬프트에 입력하고 ```Enter``` 키를 누르면 다음과 같은 출력을 만날 수 있다.

![스크린샷 2021-11-08 오후 2.43.21](../images/21-11-08-Linux/스크린샷 2021-11-08 오후 2.43.21.png)

- 왼쪽에서 부터 보면, ```-``` 와 ```d``` 는 각각 not directory 와 directory 를 나타낸다.
- 폴더인 경우 d를, 파일인 경우 -로 시작한다.
- 이어지는 rwx는 각각 ```read permission```, ```write permission```, ```execute permission``` 으로 읽기 권한, 쓰기 권한, 실행 권한을 나타낸다.
- 사용자와 그룹, 나머지에 대한 권한을 표시하기 위해 3개의 섹션으로 표시된다.
- 예를 들어, 파일 ```helloworld.js``` 은 사용자가 읽기와 쓰기가 가능하고, 그룹과 나머지는 읽기만 가능하다.

![스크린샷 2021-11-08 오후 2.52.26](../images/21-11-08-Linux/스크린샷 2021-11-08 오후 2.52.26.png)

### user, group, and other

**user**

- user는 파일의 소유자이다. 기본적으로 파일을 만든 사람이 소유자가 된다.

**group**

- group에는 여러 user가 포함될 수 있다. 그룹에 속한 모든 user는 파일에 대한 동일한 group 엑세스 권한을 갖는다. 각 user에게 일일이 권한을 할당하는 대신, 모든 user를 group에 추가하고, 파일에 group 권한을 할당할 수 있다.

**other**

- 파일에 대한 엑세스 권한이 있는 다른 user이다. 파일은 만들지 않은 다른 모든 user를 의미한다.
- 따라서 other 권한을 설정하면, 해당 권한을 global권한 설정이라고 볼 수도 있다.



### chmod

> 권한을 변경하는 명령어

권한을 변경하는 방식은 두 가지가 있다.

1. 더하기(+), 빼기(-), 할당(=)과 엑세서 유형을 표기해서 변경하는 Symbolic method
2. rwx를 3 bit로 해석하여, 숫자 3자리로 권한을 표기해서 변경하는 Absolute form

Symbolic method는 액세스 클래스, 연산자, 액세스 타입으로 구분한다.

<img src="../images/21-11-08-Linux/스크린샷 2021-11-08 오후 8.42.47.png" alt="스크린샷 2021-11-08 오후 8.42.47" style="zoom: 50%;" />

Absolute form은 숫자 7까지 나타내는 3 bits의 합으로 표기한다.

<img src="../images/21-11-08-Linux/스크린샷 2021-11-08 오후 9.29.27.png" alt="스크린샷 2021-11-08 오후 9.29.27" style="zoom:50%;" />

```js
# u=rwx (4 + 2 + 1 = 7), go=r (4 + 0 + 0 = 4)
chmod 744 helloworld.js # -rwxr--r--
```

<img src="../images/21-11-08-Linux/스크린샷 2021-11-08 오후 9.33.40.png" alt="스크린샷 2021-11-08 오후 9.33.40" style="zoom:50%;" />



# 환경변수

> Linux 기반의 운영체제의 PC에는 시스템 자체에 전역변수를 설정할 수 있다. 그리고 시스템에 설정한 전역변수를 환경변수라고 한다. ```export``` 를 이용해 환경변수를 설정할 수 있다.



## 환경변수 사용법

### export: 환경변수 확인하기,  환경변수 임시 적용

> 리눅스 운영체제에는 이미 많은 환경변수가 설정되어 있다. 터미널에 명령어 ```export``` 를 입력해, 기록된 환경변수를 확인할 수 있다.

<img src="../images/21-11-08-Linux/스크린샷 2021-11-08 오후 9.49.59.png" alt="스크린샷 2021-11-08 오후 9.49.59" style="zoom:50%;" />

명령어 ```export``` 를 이용하면, 새로운 환경변수를 추가할 수 있다.

환경변수 추가시 등호 표시(Equal sign, =)앞뒤에는 반드시 공백이 없어야 한다.

```js
export urclass="is good"
```

​	                                             [커맨드] export 명령어로 환경변수를 설정한다.

명령어 ```echo``` 와 함께 환경변수를 입력하면, 환경변수의 값을 확인할 수 있다. 이때 환경변수의 앞에는 달러사인($)을 입력하여, 변수라는 뜻을 터미널에 전달한다.

<img src="../images/21-11-08-Linux/스크린샷 2021-11-08 오후 10.28.46.png" alt="스크린샷 2021-11-08 오후 10.28.46" style="zoom:50%;" />

### dotenv: 자바스크립트에서 환경변수 사용하기

> npm 모듈 dotenv를 사용하면, 자바스크립트에서 환경변수를 사용할 수 있다.

설치한 dotenv를 이용해 환경변수에 접근할 수 있다. 새로운 파일 index.js를 생성하고, ```process.env``` 를 출력한다. Node.js의 내장객체 ```process.env``` 를 이용하면, 명령어 ```export``` 로 확인한 내용과 동일한 내용을 객체로 출력한다.



### .env

> Node.js에서 환경변수 영구 적용

명령어 ```export``` 로 적용한 환경변수는 현재 사용 중인 터미널에서만 임시로 사용이 가능하다.

Node.js에서는 파일 .env를 만들어 저장하는 방법을 사용한다.

먼저, .env 파일을 생성하고, 사용하고자 하는 환경변수를 입력한 뒤 저장한다.

<img src="../images/21-11-08-Linux/스크린샷 2021-11-08 오후 10.50.32.png" alt="스크린샷 2021-11-08 오후 10.50.32" style="zoom:50%;" />

모듈 dotenv를 이용하면, 파일 .env에 저장한 환경변수를 조회할 수 있다. Index.js를 다음과 같이 수정하고, 저장한다.

```js
const dotenv = require("dotenv");
dotenv.config();
console.log(process.env.myname);
```

[코드] index.js에서 doting.config 메소드를 이용해, .env를 process.env에 적용할 수 있다.

그다음 index.js를 실행하면 다음과 같은 결과를 얻을 수 있다.

<img src="../images/21-11-08-Linux/스크린샷 2021-11-08 오후 10.50.45.png" alt="스크린샷 2021-11-08 오후 10.50.45" style="zoom:50%;" />

환경변수를 이용해 API key, DB password와 같이 민감한 정보를 저장하고 관리할 수 있다. 그뿐만 아니라 서로 다른 PC 또는 여려 .env 파일에서, 같은 변수 이름에 다른 값을 할당할 수 있다.